# Racing Game

## รายละเอียดเกม

**Racing Game** เป็นเกมแข่งรถที่ผู้เล่นสามารถแข่งกับเพื่อน ๆ ในโหมด **Multiplayer** ได้แบบเรียลไทม์ โดยผู้เล่นจะต้องขับรถไปถึงเส้นชัยให้เร็วที่สุดเพื่อเป็นผู้ชนะ ตัวเกมมีการสนับสนุนผู้เล่นหลายคนโดยใช้ **Photon PUN** ในการเชื่อมต่อระหว่างผู้เล่นแต่ละคนผ่านระบบเครือข่าย

## วิธีการเล่น

1. **เริ่มเกม**: เมื่อเข้าสู่หน้าจอเริ่มเกม ผู้เล่นต้องกรอกชื่อในช่อง **InputField** และกดปุ่ม **Start** เพื่อเริ่มเกม
2. **การแข่ง**: ผู้เล่นจะได้รับการ spawn ในจุดต่าง ๆ ของสนามแข่ง และเริ่มขับรถไปยังเส้นชัย
3. **การชน**: หากผู้เล่นชนกับอุปสรรคหรือคนอื่นจะทำให้รถเคลื่อนที่ช้าลง
4. **เส้นชัย**: ผู้เล่นคนแรกที่ไปถึงเส้นชัยจะเป็นผู้ชนะ และจะมีการประกาศผลในหน้าจอ **Game Over**

## รูปภาพตัวอย่างเกม

![Game Screenshot](https://github.com/ThatchanonPoommanee/racing-game/blob/main/Racing.png)

## โครงสร้างระบบ Multiplayer ที่ใช้

เกมนี้ใช้ **Photon PUN** (Photon Unity Networking) สำหรับการเชื่อมต่อระหว่างผู้เล่นในระบบ **Multiplayer**. Photon PUN เป็นระบบที่ทำให้การสร้างห้องเกมและการซิงค์ข้อมูลต่าง ๆ เช่น การเคลื่อนไหวของผู้เล่น, การยิง, และการชนของรถในเกมทำงานได้อย่างราบรื่นในหลาย ๆ ผู้เล่นแบบเรียลไทม์

### ข้อมูลเกี่ยวกับการใช้งาน Photon PUN:
- **การเชื่อมต่อ**: ผู้เล่นจะเชื่อมต่อกับ Photon Cloud ผ่าน `PhotonNetwork.ConnectUsingSettings()`.
- **การสร้างห้อง**: ห้องใหม่จะถูกสร้างขึ้นหากไม่มีห้องเปิดอยู่หรือสามารถเข้าร่วมห้องที่มีอยู่แล้วได้
- **การ spawn ผู้เล่น**: ผู้เล่นจะถูก spawn ในตำแหน่งที่กำหนดใน **spawn points** โดยใช้ `PhotonNetwork.Instantiate()` เพื่อให้มั่นใจว่าผู้เล่นทุกคนในเกมจะเห็นการเคลื่อนไหวของผู้เล่นแต่ละคน

## ปัญหาที่พบ และวิธีการแก้ไข

1. **ปัญหาการเชื่อมต่อ Photon**:
   - **อาการ**: เมื่อเริ่มเกมไม่ได้ หรือไม่สามารถเข้าห้องได้
   - **วิธีการแก้ไข**: ตรวจสอบการตั้งค่า Photon ในโปรเจคและตรวจสอบว่า API Key และการตั้งค่า Network ใน Photon ถูกต้อง

2. **NullReferenceException ใน InputField**:
   - **อาการ**: เมื่อกดปุ่ม **Start** แล้วเกิดข้อผิดพลาด `NullReferenceException`
   - **วิธีการแก้ไข**: ตรวจสอบว่า **InputField** ได้ถูกลากมาเชื่อมโยงกับตัวแปร `inputName` ใน **Inspector** ของสคริปต์ **Launcher.cs** แล้วหรือไม่

3. **ปัญหาการซิงค์ข้อมูลระหว่างผู้เล่น**:
   - **อาการ**: ข้อมูลบางส่วนไม่ถูกซิงค์ระหว่างผู้เล่น เช่น การเคลื่อนไหวของผู้เล่นหรือการแสดงผลที่แตกต่างกัน
   - **วิธีการแก้ไข**: ตรวจสอบการใช้งาน `photonView` เพื่อให้มั่นใจว่าแต่ละผู้เล่นมี `PhotonView` ของตัวเองและข้อมูลต่าง ๆ ถูกซิงค์ผ่าน **RPC** หรือ **RaiseEvent** ของ Photon

4. **การ spawn ผู้เล่นไม่ตรงตำแหน่ง**:
   - **อาการ**: ผู้เล่น spawn ในตำแหน่งที่ไม่ถูกต้อง
   - **วิธีการแก้ไข**: ตรวจสอบจำนวน **spawn points** และการคำนวณตำแหน่งของแต่ละผู้เล่นโดยใช้ `PhotonNetwork.LocalPlayer.ActorNumber` เพื่อตั้งค่าตำแหน่งการ spawn อย่างถูกต้อง
